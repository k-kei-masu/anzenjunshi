<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å®‰å…¨å·¡è¦–ãƒã‚§ãƒƒã‚¯ã‚·ã‚¹ãƒ†ãƒ </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'Hiragino Sans', sans-serif;
            width: 375px;
            margin: 0 auto;
            background: #f0f0f3;
            color: #333;
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        .header {
            background: linear-gradient(135deg, #2c5aa8 0%, #4a90e2 100%);
            color: white;
            padding: 44px 16px 16px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .header-subtitle {
            font-size: 12px;
            opacity: 0.9;
            margin-top: 4px;
        }

        /* ç”»é¢ã‚³ãƒ³ãƒ†ãƒŠ */
        .screen {
            display: none;
            padding: 16px;
            animation: slideIn 0.3s ease-out;
            min-height: calc(100vh - 80px);
        }

        .screen.active {
            display: block;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* ã‚«ãƒ¼ãƒ‰ */
        .card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .card-title {
            font-size: 14px;
            font-weight: 600;
            color: #666;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* ãƒ•ã‚©ãƒ¼ãƒ è¦ç´  */
        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
            font-weight: 500;
        }

        label.required::after {
            content: ' *';
            color: #e74c3c;
        }

        input[type="text"],
        input[type="date"],
        select,
        textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            background: white;
            transition: all 0.2s;
            min-height: 44px;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #4a90e2;
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        /* ãƒœã‚¿ãƒ³ */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            min-height: 44px;
            text-decoration: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4a90e2, #2c5aa8);
            color: white;
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);
        }

        .btn-primary:active {
            transform: scale(0.98);
            box-shadow: 0 2px 8px rgba(74, 144, 226, 0.3);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: white;
            color: #4a90e2;
            border: 2px solid #4a90e2;
        }

        .btn-secondary:active {
            background: #f0f8ff;
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            box-shadow: 0 4px 12px rgba(46, 204, 113, 0.3);
        }

        .btn-block {
            width: 100%;
        }

        /* ä½œæ¥­è€…ãƒªã‚¹ãƒˆ */
        .worker-list {
            max-height: 200px;
            overflow-y: auto;
        }

        .worker-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
            margin-bottom: 8px;
        }

        .worker-item input {
            flex: 1;
            padding: 8px;
            font-size: 14px;
        }

        .worker-remove {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #e74c3c;
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ */
        .checklist-item {
            background: white;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            min-height: 60px;
        }

        .checklist-item:active {
            transform: scale(0.98);
            background: #f8f9fa;
        }

        /* ãƒ„ãƒªãƒ¼é¸æŠ */
        .tree-selector {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .tree-category {
            margin-bottom: 12px;
        }

        .tree-header {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px;
            background: #f0f8ff;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
            color: #2c5aa8;
        }

        .tree-header:active {
            background: #e0f0ff;
        }

        .tree-arrow {
            display: inline-block;
            transition: transform 0.2s;
        }

        .tree-header.expanded .tree-arrow {
            transform: rotate(90deg);
        }

        .tree-items {
            display: none;
            padding-left: 20px;
            margin-top: 8px;
        }

        .tree-items.expanded {
            display: block;
        }

        .tree-item {
            padding: 8px 12px;
            margin-bottom: 4px;
            border-left: 3px solid #e0e0e0;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .tree-item:hover {
            background: #f8f9fa;
            border-left-color: #4a90e2;
        }

        .tree-item-add {
            padding: 4px 12px;
            background: #4a90e2;
            color: white;
            border-radius: 4px;
            font-size: 12px;
            border: none;
            cursor: pointer;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #999;
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }

        .empty-state-text {
            font-size: 14px;
            line-height: 1.6;
        }

        .checklist-checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid #ddd;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .checklist-checkbox.checked {
            background: #4a90e2;
            border-color: #4a90e2;
        }

        .checklist-checkbox.checked::after {
            content: 'âœ“';
            color: white;
            font-weight: bold;
        }

        .checklist-name {
            flex: 1;
            font-size: 16px;
            font-weight: 500;
        }

        .checklist-status {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .status-pending {
            background: #f0f0f3;
            color: #999;
        }

        .status-progress {
            background: #f39c12;
            color: white;
        }

        .status-complete {
            background: #27ae60;
            color: white;
        }

        /* ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ */
        .toolbar {
            display: flex;
            gap: 8px;
            padding: 12px;
            background: white;
            border-radius: 8px;
            margin-bottom: 16px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .toolbar-btn {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: white;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            transition: all 0.2s;
            min-height: 60px;
            justify-content: center;
        }

        .toolbar-btn:active {
            background: #f0f8ff;
            border-color: #4a90e2;
        }

        .toolbar-icon {
            font-size: 20px;
        }

        .toolbar-label {
            font-size: 11px;
            color: #666;
        }

        /* ãƒã‚§ãƒƒã‚¯é …ç›® */
        .check-category {
            background: #2c5aa8;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            margin: 16px 0 8px;
        }

        .check-item {
            background: white;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        .check-item-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .check-item-text {
            flex: 1;
            font-size: 14px;
            line-height: 1.5;
        }

        .info-btn {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #4a90e2;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
        }

        .check-options {
            display: flex;
            gap: 8px;
            margin-top: 8px;
        }

        .check-option {
            flex: 1;
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 6px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 12px;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }

        .check-option.selected-ok {
            background: #27ae60;
            border-color: #27ae60;
            color: white;
        }

        .check-option.selected-warning {
            background: #f39c12;
            border-color: #f39c12;
            color: white;
        }

        .check-option.selected-ng {
            background: #e74c3c;
            border-color: #e74c3c;
            color: white;
        }

        .note-btn {
            margin-top: 8px;
            padding: 6px 12px;
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 6px;
            color: #856404;
            cursor: pointer;
            font-size: 12px;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        /* æŒ‡æ‘˜ä¸€è¦§ */
        .issue-table {
            width: 100%;
            font-size: 12px;
            border-collapse: collapse;
        }

        .issue-table th {
            background: #f0f0f3;
            padding: 8px 4px;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid #ddd;
        }

        .issue-table td {
            padding: 8px 4px;
            border-bottom: 1px solid #eee;
        }

        .issue-table input,
        .issue-table select {
            width: 100%;
            padding: 4px;
            font-size: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .delete-btn {
            width: 28px;
            height: 28px;
            border-radius: 4px;
            background: #e74c3c;
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ãƒ¢ãƒ¼ãƒ€ãƒ« */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            animation: fadeIn 0.2s;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 20px;
            width: 90%;
            max-width: 340px;
            animation: slideUp 0.3s;
        }

        @keyframes slideUp {
            from {
                transform: translateY(20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            text-align: center;
        }

        .modal-buttons {
            display: flex;
            gap: 8px;
            margin-top: 20px;
        }

        /* ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ */
        .progress-bar {
            height: 4px;
            background: #e0e0e0;
            border-radius: 2px;
            overflow: hidden;
            margin: 8px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4a90e2, #2c5aa8);
            border-radius: 2px;
            transition: width 0.3s;
        }

        /* ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ */
        .fab {
            position: fixed;
            bottom: 24px;
            right: calc(50% - 175px);
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            z-index: 90;
            transition: all 0.2s;
        }

        .fab:active {
            transform: scale(0.95);
        }

        /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s;
        }

        /* ãƒãƒƒã‚¸ */
        .badge {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 10px;
            background: #e74c3c;
            color: white;
            font-size: 10px;
            font-weight: bold;
            min-width: 18px;
            text-align: center;
        }
    </style>
</head>
<body>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <div class="header">
        <h1>
            <span>ğŸ”</span>
            <span>å®‰å…¨å·¡è¦–ãƒã‚§ãƒƒã‚¯ã‚·ã‚¹ãƒ†ãƒ </span>
        </h1>
        <div class="header-subtitle" id="headerSubtitle">åŸºæœ¬æƒ…å ±å…¥åŠ›</div>
    </div>

    <!-- A: åŸºæœ¬æƒ…å ±å…¥åŠ›ç”»é¢ -->
    <div class="screen active" id="screenA">
        <div class="card">
            <div class="card-title">
                <span>ğŸ“‹</span>
                <span>å·¡è¦–æƒ…å ±</span>
            </div>
            
            <div class="form-group">
                <label for="inspectionDate" class="required">å·¡è¦–æ—¥</label>
                <input type="date" id="inspectionDate" value="">
            </div>

            <div class="form-group">
                <label for="siteName" class="required">ç¾å ´å</label>
                <input type="text" id="siteName" placeholder="ä¾‹ï¼šã€‡ã€‡ãƒ“ãƒ«æ–°ç¯‰å·¥äº‹">
            </div>

            <div class="form-group">
                <label for="workLocation" class="required">ä½œæ¥­å ´æ‰€</label>
                <div style="display: flex; gap: 8px;">
                    <input type="text" id="workLocation" placeholder="ä¾‹ï¼š3éšãƒ•ãƒ­ã‚¢" style="flex: 1;">
                    <button class="btn btn-secondary" style="width: 44px; padding: 0;">ğŸ“</button>
                </div>
            </div>

            <div class="form-group">
                <label for="constructionType" class="required">æ–½å·¥åŒºåˆ†</label>
                <select id="constructionType">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <option value="direct">ç›´å–¶</option>
                    <option value="contract">è«‹è² </option>
                    <option value="cooperation">å”åŠ›ä¼šç¤¾</option>
                </select>
            </div>

            <div class="form-group">
                <label for="workCategory" class="required">ä½œæ¥­å†…å®¹ã‚«ãƒ†ã‚´ãƒª</label>
                <select id="workCategory">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <option value="foundation">åŸºç¤å·¥äº‹</option>
                    <option value="frame">èº¯ä½“å·¥äº‹</option>
                    <option value="interior">å†…è£…å·¥äº‹</option>
                    <option value="equipment">è¨­å‚™å·¥äº‹</option>
                    <option value="exterior">å¤–è£…å·¥äº‹</option>
                </select>
            </div>
        </div>

        <div class="card">
            <div class="card-title">
                <span>ğŸ‘·</span>
                <span>ä½œæ¥­è²¬ä»»è€…ãƒ»ä½œæ¥­è€…</span>
            </div>
            
            <div class="form-group">
                <label for="supervisor" class="required">ä½œæ¥­è²¬ä»»è€…</label>
                <input type="text" id="supervisor" placeholder="æ°åã‚’å…¥åŠ›">
            </div>

            <div class="form-group">
                <label>ä½œæ¥­è€…ãƒªã‚¹ãƒˆ</label>
                <div class="worker-list" id="workerList">
                    <div class="worker-item">
                        <input type="text" placeholder="ä½œæ¥­è€…å">
                        <button class="worker-remove" onclick="removeWorker(this)">Ã—</button>
                    </div>
                </div>
                <button class="btn btn-secondary" onclick="addWorker()" style="margin-top: 8px;">
                    <span>ï¼‹ ä½œæ¥­è€…ã‚’è¿½åŠ </span>
                </button>
            </div>
        </div>

        <button class="btn btn-primary btn-block" onclick="goToScreenB()">
            <span>Next</span>
            <span>â–¶</span>
        </button>
    </div>

    <!-- B: ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆé …ç›®é¸æŠç”»é¢ -->
    <div class="screen" id="screenB">
        <div class="card">
            <div class="card-title">
                <span>ğŸ“</span>
                <span>ãƒã‚§ãƒƒã‚¯å¯¾è±¡ä½œæ¥­</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar" style="width: 0%;"></div>
            </div>
            <div style="font-size: 12px; color: #666; text-align: center; margin-top: 4px;">
                é€²æ—: <span id="progressText">0/0</span>
            </div>
        </div>

        <!-- ãƒ„ãƒªãƒ¼é¸æŠ -->
        <div class="tree-selector">
            <div class="card-title">
                <span>ğŸ”</span>
                <span>ä½œæ¥­ã‚’é¸æŠ</span>
            </div>
            
            <div class="tree-category">
                <div class="tree-header" onclick="toggleTree('security')">
                    <span class="tree-arrow">â–¶</span>
                    <span>ğŸš§ ä¿å®‰å¯¾ç­–é–¢é€£ä½œæ¥­</span>
                </div>
                <div class="tree-items" id="tree-security">
                    <div class="tree-item">
                        <span>é“è·¯ä¿å®‰è¨­å‚™è¨­ç½®ä½œæ¥­</span>
                        <button class="tree-item-add" onclick="addWorkFromTree('é“è·¯ä¿å®‰è¨­å‚™è¨­ç½®ä½œæ¥­')">è¿½åŠ </button>
                    </div>
                    <div class="tree-item">
                        <span>äº¤é€šèª˜å°ãƒ»è­¦å‚™ä½œæ¥­</span>
                        <button class="tree-item-add" onclick="addWorkFromTree('äº¤é€šèª˜å°ãƒ»è­¦å‚™ä½œæ¥­')">è¿½åŠ </button>
                    </div>
                    <div class="tree-item">
                        <span>ä½œæ¥­åŒºç”»è¨­å®šä½œæ¥­</span>
                        <button class="tree-item-add" onclick="addWorkFromTree('ä½œæ¥­åŒºç”»è¨­å®šä½œæ¥­')">è¿½åŠ </button>
                    </div>
                </div>
            </div>

            <div class="tree-category">
                <div class="tree-header" onclick="toggleTree('manhole')">
                    <span class="tree-arrow">â–¶</span>
                    <span>ğŸ•³ï¸ MHï¼ˆãƒãƒ³ãƒ›ãƒ¼ãƒ«ï¼‰ä½œæ¥­</span>
                </div>
                <div class="tree-items" id="tree-manhole">
                    <div class="tree-item">
                        <span>MHå†…ä½œæ¥­</span>
                        <button class="tree-item-add" onclick="addWorkFromTree('MHå†…ä½œæ¥­')">è¿½åŠ </button>
                    </div>
                    <div class="tree-item">
                        <span>MHé–‹å£éƒ¨é¤Šç”Ÿä½œæ¥­</span>
                        <button class="tree-item-add" onclick="addWorkFromTree('MHé–‹å£éƒ¨é¤Šç”Ÿä½œæ¥­')">è¿½åŠ </button>
                    </div>
                    <div class="tree-item">
                        <span>é…¸ç´ æ¿ƒåº¦æ¸¬å®šãƒ»æ›æ°—ä½œæ¥­</span>
                        <button class="tree-item-add" onclick="addWorkFromTree('é…¸ç´ æ¿ƒåº¦æ¸¬å®šãƒ»æ›æ°—ä½œæ¥­')">è¿½åŠ </button>
                    </div>
                </div>
            </div>

            <div class="tree-category">
                <div class="tree-header" onclick="toggleTree('pole')">
                    <span class="tree-arrow">â–¶</span>
                    <span>âš¡ æŸ±ä¸Šä½œæ¥­</span>
                </div>
                <div class="tree-items" id="tree-pole">
                    <div class="tree-item">
                        <span>é›»æŸ±æ˜‡é™ä½œæ¥­</span>
                        <button class="tree-item-add" onclick="addWorkFromTree('é›»æŸ±æ˜‡é™ä½œæ¥­')">è¿½åŠ </button>
                    </div>
                    <div class="tree-item">
                        <span>æ¶ç©ºé…ç·šä½œæ¥­</span>
                        <button class="tree-item-add" onclick="addWorkFromTree('æ¶ç©ºé…ç·šä½œæ¥­')">è¿½åŠ </button>
                    </div>
                    <div class="tree-item">
                        <span>é«˜åœ§æ´»ç·šä½œæ¥­</span>
                        <button class="tree-item-add" onclick="addWorkFromTree('é«˜åœ§æ´»ç·šä½œæ¥­')">è¿½åŠ </button>
                    </div>
                    <div class="tree-item">
                        <span>é›»æŸ±å»ºæ›¿ä½œæ¥­</span>
                        <button class="tree-item-add" onclick="addWorkFromTree('é›»æŸ±å»ºæ›¿ä½œæ¥­')">è¿½åŠ </button>
                    </div>
                </div>
            </div>

            <div class="tree-category">
                <div class="tree-header" onclick="toggleTree('vehicle')">
                    <span class="tree-arrow">â–¶</span>
                    <span>ğŸ—ï¸ é«˜æ‰€ä½œæ¥­è»Šãƒ»é‡æ©Ÿä½œæ¥­</span>
                </div>
                <div class="tree-items" id="tree-vehicle">
                    <div class="tree-item">
                        <span>é«˜æ‰€ä½œæ¥­è»Šä½œæ¥­</span>
                        <button class="tree-item-add" onclick="addWorkFromTree('é«˜æ‰€ä½œæ¥­è»Šä½œæ¥­')">è¿½åŠ </button>
                    </div>
                    <div class="tree-item">
                        <span>ã‚¯ãƒ¬ãƒ¼ãƒ³ä½œæ¥­</span>
                        <button class="tree-item-add" onclick="addWorkFromTree('ã‚¯ãƒ¬ãƒ¼ãƒ³ä½œæ¥­')">è¿½åŠ </button>
                    </div>
                    <div class="tree-item">
                        <span>ãƒãƒƒã‚¯ãƒ›ã‚¦æ˜å‰Šä½œæ¥­</span>
                        <button class="tree-item-add" onclick="addWorkFromTree('ãƒãƒƒã‚¯ãƒ›ã‚¦æ˜å‰Šä½œæ¥­')">è¿½åŠ </button>
                    </div>
                    <div class="tree-item">
                        <span>ãƒ€ãƒ³ãƒ—ãƒˆãƒ©ãƒƒã‚¯é‹æ¬ä½œæ¥­</span>
                        <button class="tree-item-add" onclick="addWorkFromTree('ãƒ€ãƒ³ãƒ—ãƒˆãƒ©ãƒƒã‚¯é‹æ¬ä½œæ¥­')">è¿½åŠ </button>
                    </div>
                </div>
            </div>

            <div class="tree-category">
                <div class="tree-header" onclick="toggleTree('night')">
                    <span class="tree-arrow">â–¶</span>
                    <span>ğŸŒ™ å¤œé–“ä½œæ¥­</span>
                </div>
                <div class="tree-items" id="tree-night">
                    <div class="tree-item">
                        <span>å¤œé–“é“è·¯å·¥äº‹</span>
                        <button class="tree-item-add" onclick="addWorkFromTree('å¤œé–“é“è·¯å·¥äº‹')">è¿½åŠ </button>
                    </div>
                    <div class="tree-item">
                        <span>å¤œé–“é›»æ°—å·¥äº‹</span>
                        <button class="tree-item-add" onclick="addWorkFromTree('å¤œé–“é›»æ°—å·¥äº‹')">è¿½åŠ </button>
                    </div>
                    <div class="tree-item">
                        <span>å¤œé–“ç·Šæ€¥å¯¾å¿œä½œæ¥­</span>
                        <button class="tree-item-add" onclick="addWorkFromTree('å¤œé–“ç·Šæ€¥å¯¾å¿œä½œæ¥­')">è¿½åŠ </button>
                    </div>
                </div>
            </div>

            <div class="tree-category">
                <div class="tree-header" onclick="toggleTree('general')">
                    <span class="tree-arrow">â–¶</span>
                    <span>ğŸ”¨ ä¸€èˆ¬åœŸæœ¨ãƒ»é›»æ°—å·¥äº‹</span>
                </div>
                <div class="tree-items" id="tree-general">
                    <div class="tree-item">
                        <span>ã‚±ãƒ¼ãƒ–ãƒ«æ•·è¨­ä½œæ¥­</span>
                        <button class="tree-item-add" onclick="addWorkFromTree('ã‚±ãƒ¼ãƒ–ãƒ«æ•·è¨­ä½œæ¥­')">è¿½åŠ </button>
                    </div>
                    <div class="tree-item">
                        <span>ç®¡è·¯å·¥äº‹</span>
                        <button class="tree-item-add" onclick="addWorkFromTree('ç®¡è·¯å·¥äº‹')">è¿½åŠ </button>
                    </div>
                    <div class="tree-item">
                        <span>æ˜å‰Šãƒ»åŸ‹æˆ»ã—ä½œæ¥­</span>
                        <button class="tree-item-add" onclick="addWorkFromTree('æ˜å‰Šãƒ»åŸ‹æˆ»ã—ä½œæ¥­')">è¿½åŠ </button>
                    </div>
                    <div class="tree-item">
                        <span>èˆ—è£…å¾©æ—§ä½œæ¥­</span>
                        <button class="tree-item-add" onclick="addWorkFromTree('èˆ—è£…å¾©æ—§ä½œæ¥­')">è¿½åŠ </button>
                    </div>
                    <div class="tree-item">
                        <span>å¤‰é›»è¨­å‚™å·¥äº‹</span>
                        <button class="tree-item-add" onclick="addWorkFromTree('å¤‰é›»è¨­å‚™å·¥äº‹')">è¿½åŠ </button>
                    </div>
                </div>
            </div>
        </div>

        <div id="checklistItems">
            <div class="empty-state" id="emptyState">
                <div class="empty-state-icon">ğŸ“‹</div>
                <div class="empty-state-text">
                    ä½œæ¥­ãŒé¸æŠã•ã‚Œã¦ã„ã¾ã›ã‚“<br>
                    ä¸Šè¨˜ã‹ã‚‰ä½œæ¥­ã‚’é¸æŠã—ã¦ãã ã•ã„
                </div>
            </div>
        </div>

        <button class="btn btn-secondary btn-block" onclick="addNewWork()" style="margin-bottom: 12px;">
            <span>ï¼‹ ãã®ä»–ã®ä½œæ¥­ã‚’è¿½åŠ </span>
        </button>

        <button class="btn btn-success btn-block" id="finishBtn" onclick="goToScreenD()" disabled>
            <span>ã™ã¹ã¦å®Œäº†ã—ã¦æ¬¡ã¸</span>
            <span>â–¶</span>
        </button>
    </div>

    <!-- C: ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆå…¥åŠ›ç”»é¢ -->
    <div class="screen" id="screenC">
        <div class="toolbar">
            <button class="toolbar-btn" onclick="takePhoto()">
                <span class="toolbar-icon">ğŸ“·</span>
                <span class="toolbar-label">æ’®å½±</span>
            </button>
            <button class="toolbar-btn">
                <span class="toolbar-icon">ğŸ–¼ï¸</span>
                <span class="toolbar-label">å†™çœŸ <span class="badge" id="photoCount">0</span></span>
            </button>
            <button class="toolbar-btn" onclick="viewPhotos()">
                <span class="toolbar-icon">ğŸ‘ï¸</span>
                <span class="toolbar-label">ç¢ºèª</span>
            </button>
        </div>

        <div class="card">
            <div class="card-title" id="currentWorkName">ä½œæ¥­å</div>
        </div>

        <div id="checkItems">
            <!-- ä¿å®‰å¯¾ç­–äº‹é … -->
            <div class="check-category">ä¿å®‰å¯¾ç­–äº‹é …ï¼ˆé›»æ°—ã€åœŸæœ¨å…±é€šï¼‰</div>
            
            <div class="check-item" data-item-id="1">
                <div class="check-item-header">
                    <span class="check-item-text">1. ä½œæ¥­æ¨™è­˜ã‚„ä¿å®‰è¨­å‚™ã¯é©åˆ‡ã«é…ç½®ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚</span>
                    <button class="info-btn" onclick="showInfo('é“è·¯ä½¿ç”¨è¨±å¯æ¡ä»¶ã«å¾“ã„ã€é©åˆ‡ãªä½ç½®ã«è¨­ç½®')">i</button>
                </div>
                <div class="check-options">
                    <div class="check-option" onclick="selectOption(this, 'ok', 1)">
                        <span>âœ“</span>
                        <span>é©åˆ</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'warning', 1)">
                        <span>âš </span>
                        <span>è¦æ˜¯æ­£</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'ng', 1)">
                        <span>âœ—</span>
                        <span>ä¸é©</span>
                    </div>
                </div>
                <button class="note-btn" onclick="addNote(1)">
                    <span>!</span>
                    <span>æŒ‡æ‘˜äº‹é …ã‚’è¿½åŠ </span>
                </button>
            </div>

            <div class="check-item" data-item-id="2">
                <div class="check-item-header">
                    <span class="check-item-text">2. ä½œæ¥­ç®‡æ‰€ç¯„å›²å†…ã¸ã®ç¬¬ä¸‰è€…ç«‹å…¥ç¦æ­¢æªç½®ã¯è¡Œã‚ã‚Œã¦ã„ã‚‹ã‹ã€‚</span>
                    <button class="info-btn" onclick="showInfo('ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ³ã€ãƒãƒ¼ç­‰ã§ç¢ºå®Ÿã«åŒºç”»')">i</button>
                </div>
                <div class="check-options">
                    <div class="check-option" onclick="selectOption(this, 'ok', 2)">
                        <span>âœ“</span>
                        <span>é©åˆ</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'warning', 2)">
                        <span>âš </span>
                        <span>è¦æ˜¯æ­£</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'ng', 2)">
                        <span>âœ—</span>
                        <span>ä¸é©</span>
                    </div>
                </div>
                <button class="note-btn" onclick="addNote(2)">
                    <span>!</span>
                    <span>æŒ‡æ‘˜äº‹é …ã‚’è¿½åŠ </span>
                </button>
            </div>

            <div class="check-item" data-item-id="3">
                <div class="check-item-header">
                    <span class="check-item-text">3. äº¤é€šè­¦å‚™å“¡ï¼ˆäººæ•°ãƒ»é…ç½®ï¼‰ã«ã‚ˆã‚‹äº¤é€šèª˜å°ã¯çš„ç¢ºã«è¡Œã‚ã‚Œã¦ã„ã‚‹ã‹ã€‚</span>
                    <button class="info-btn" onclick="showInfo('é“è·¯ä½¿ç”¨è¨±å¯æ¡ä»¶ã«åŸºã¥ãé…ç½®')">i</button>
                </div>
                <div class="check-options">
                    <div class="check-option" onclick="selectOption(this, 'ok', 3)">
                        <span>âœ“</span>
                        <span>é©åˆ</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'warning', 3)">
                        <span>âš </span>
                        <span>è¦æ˜¯æ­£</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'ng', 3)">
                        <span>âœ—</span>
                        <span>ä¸é©</span>
                    </div>
                </div>
                <button class="note-btn" onclick="addNote(3)">
                    <span>!</span>
                    <span>æŒ‡æ‘˜äº‹é …ã‚’è¿½åŠ </span>
                </button>
            </div>

            <div class="check-item" data-item-id="4">
                <div class="check-item-header">
                    <span class="check-item-text">4. è³‡æ ¼è€…é…ç½®è·¯ç·šã«ãŠã‘ã‚‹æ¤œå®šåˆæ ¼è­¦å‚™å“¡ã®é…ç½®ã¯é©åˆ‡ã‹ã€‚</span>
                    <button class="info-btn" onclick="showInfo('æ¤œå®šåˆæ ¼è¨¼æ˜æ›¸ã®ç¢ºèª')">i</button>
                </div>
                <div class="check-options">
                    <div class="check-option" onclick="selectOption(this, 'ok', 4)">
                        <span>âœ“</span>
                        <span>é©åˆ</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'warning', 4)">
                        <span>âš </span>
                        <span>è¦æ˜¯æ­£</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'ng', 4)">
                        <span>âœ—</span>
                        <span>ä¸é©</span>
                    </div>
                </div>
                <button class="note-btn" onclick="addNote(4)">
                    <span>!</span>
                    <span>æŒ‡æ‘˜äº‹é …ã‚’è¿½åŠ </span>
                </button>
            </div>

            <!-- MHä½œæ¥­äº‹é … -->
            <div class="check-category">MHä½œæ¥­äº‹é …ï¼ˆé›»æ°—ã€åœŸæœ¨å…±é€šï¼‰</div>
            
            <div class="check-item" data-item-id="5">
                <div class="check-item-header">
                    <span class="check-item-text">5. é–‹å£éƒ¨ã«é©åˆ‡ãªå¢œè½é˜²æ­¢æªç½®ã‚’è¡Œã£ã¦ã„ã‚‹ã‹ã€‚ã¾ãŸã€å¢œè½é˜²æ­¢å¯¾ç­–ã®æ‰‹é †ã¯èª¤ã‚Šãªã„ã‹ã€‚</span>
                    <button class="info-btn" onclick="showInfo('é–‹å£éƒ¨ã®é¤Šç”Ÿã€å®‰å…¨æŸµã®è¨­ç½®ç¢ºèª')">i</button>
                </div>
                <div class="check-options">
                    <div class="check-option" onclick="selectOption(this, 'ok', 5)">
                        <span>âœ“</span>
                        <span>é©åˆ</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'warning', 5)">
                        <span>âš </span>
                        <span>è¦æ˜¯æ­£</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'ng', 5)">
                        <span>âœ—</span>
                        <span>ä¸é©</span>
                    </div>
                </div>
                <button class="note-btn" onclick="addNote(5)">
                    <span>!</span>
                    <span>æŒ‡æ‘˜äº‹é …ã‚’è¿½åŠ </span>
                </button>
            </div>

            <div class="check-item" data-item-id="6">
                <div class="check-item-header">
                    <span class="check-item-text">6. MHä½œæ¥­å‰ã«æœ‰è³‡æ ¼è€…ã«ã‚ˆã‚‹é…¸ç´ ãŠã‚ˆã³ç¡«åŒ–æ°´ç´ ç­‰ã®æ¿ƒåº¦æ¸¬å®šãƒ»æ›æ°—ã¯è¡Œã‚ã‚Œã¦ã„ã‚‹ã‹ã€‚ã¾ãŸã€è¨˜éŒ²ã®ä¿ç®¡ã¯é©åˆ‡ã‹ã€‚</span>
                    <button class="info-btn" onclick="showInfo('é…¸ç´ 18%ä»¥ä¸Šã€ç¡«åŒ–æ°´ç´ 10ppmä»¥ä¸‹ã®ç¢ºèª')">i</button>
                </div>
                <div class="check-options">
                    <div class="check-option" onclick="selectOption(this, 'ok', 6)">
                        <span>âœ“</span>
                        <span>é©åˆ</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'warning', 6)">
                        <span>âš </span>
                        <span>è¦æ˜¯æ­£</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'ng', 6)">
                        <span>âœ—</span>
                        <span>ä¸é©</span>
                    </div>
                </div>
                <button class="note-btn" onclick="addNote(6)">
                    <span>!</span>
                    <span>æŒ‡æ‘˜äº‹é …ã‚’è¿½åŠ </span>
                </button>
            </div>

            <div class="check-item" data-item-id="7">
                <div class="check-item-header">
                    <span class="check-item-text">7. å¿…è¦ãªæ˜‡é™è¨­å‚™ã¯æ–½ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚æ˜‡é™ä¸­ã¯å®‰å…¨ãƒ–ãƒ­ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‹ã€‚ï¼ˆ2mä»¥ä¸Šï¼‰</span>
                    <button class="info-btn" onclick="showInfo('2mä»¥ä¸Šã®é«˜æ‰€ã§ã¯å®‰å…¨ãƒ–ãƒ­ãƒƒã‚¯å¿…é ˆ')">i</button>
                </div>
                <div class="check-options">
                    <div class="check-option" onclick="selectOption(this, 'ok', 7)">
                        <span>âœ“</span>
                        <span>é©åˆ</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'warning', 7)">
                        <span>âš </span>
                        <span>è¦æ˜¯æ­£</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'ng', 7)">
                        <span>âœ—</span>
                        <span>ä¸é©</span>
                    </div>
                </div>
                <button class="note-btn" onclick="addNote(7)">
                    <span>!</span>
                    <span>æŒ‡æ‘˜äº‹é …ã‚’è¿½åŠ </span>
                </button>
            </div>

            <!-- æŸ±ä¸Šä½œæ¥­äº‹é … -->
            <div class="check-category">æŸ±ä¸Šä½œæ¥­äº‹é …ï¼ˆé›»æ°—ã€åœŸæœ¨å…±é€šï¼‰</div>
            
            <div class="check-item" data-item-id="8">
                <div class="check-item-header">
                    <span class="check-item-text">8. ãƒ•ãƒ«ãƒãƒ¼ãƒã‚¹ã€SAä»˜ãƒ©ãƒ³ãƒ¤ãƒ¼ãƒ‰ã®ç›®è¦–ç‚¹æ¤œã‚’è¡Œã„ã€æœ¬ãƒ­ãƒ¼ãƒ—ã«ä½“é‡ã‚’æ›ã‘ã¦ç‚¹æ¤œã—ã¦ä½¿ç”¨ã—ã¦ã„ã‚‹ã‹ã€‚</span>
                    <button class="info-btn" onclick="showInfo('ä½¿ç”¨å‰ç‚¹æ¤œã®å®Ÿæ–½ç¢ºèª')">i</button>
                </div>
                <div class="check-options">
                    <div class="check-option" onclick="selectOption(this, 'ok', 8)">
                        <span>âœ“</span>
                        <span>é©åˆ</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'warning', 8)">
                        <span>âš </span>
                        <span>è¦æ˜¯æ­£</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'ng', 8)">
                        <span>âœ—</span>
                        <span>ä¸é©</span>
                    </div>
                </div>
                <button class="note-btn" onclick="addNote(8)">
                    <span>!</span>
                    <span>æŒ‡æ‘˜äº‹é …ã‚’è¿½åŠ </span>
                </button>
            </div>

            <div class="check-item" data-item-id="9">
                <div class="check-item-header">
                    <span class="check-item-text">9. é›»æŸ±ä½œæ¥­ã«ãŠã‘ã‚‹è¶³å ´ãƒœãƒ«ãƒˆï¼ˆç· ä»˜ãƒ»è…é£Ÿï¼‰ã®ç¢ºèªã¯è‰¯ã„ã‹ã€‚</span>
                </div>
                <div class="check-options">
                    <div class="check-option" onclick="selectOption(this, 'ok', 9)">
                        <span>âœ“</span>
                        <span>é©åˆ</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'warning', 9)">
                        <span>âš </span>
                        <span>è¦æ˜¯æ­£</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'ng', 9)">
                        <span>âœ—</span>
                        <span>ä¸é©</span>
                    </div>
                </div>
                <button class="note-btn" onclick="addNote(9)">
                    <span>!</span>
                    <span>æŒ‡æ‘˜äº‹é …ã‚’è¿½åŠ </span>
                </button>
            </div>

            <div class="check-item" data-item-id="10">
                <div class="check-item-header">
                    <span class="check-item-text">10. å®‰å®šã—ãŸè¶³å ´ã‚’ç¢ºä¿ã—ã¦ä½œæ¥­ã—ã¦ã„ã‚‹ã‹ã€‚</span>
                </div>
                <div class="check-options">
                    <div class="check-option" onclick="selectOption(this, 'ok', 10)">
                        <span>âœ“</span>
                        <span>é©åˆ</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'warning', 10)">
                        <span>âš </span>
                        <span>è¦æ˜¯æ­£</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'ng', 10)">
                        <span>âœ—</span>
                        <span>ä¸é©</span>
                    </div>
                </div>
                <button class="note-btn" onclick="addNote(10)">
                    <span>!</span>
                    <span>æŒ‡æ‘˜äº‹é …ã‚’è¿½åŠ </span>
                </button>
            </div>

            <div class="check-item" data-item-id="11">
                <div class="check-item-header">
                    <span class="check-item-text">11. SAä»˜ãƒ©ãƒ³ãƒ¤ãƒ¼ãƒ‰ã®å–ä»˜ç®‡æ‰€ã¯å®‰å…¨å¸¯å–ä»˜ç®‡æ‰€ã‚ˆã‚Šä¸Šéƒ¨ã«å–ä»˜ã‘ã¦ã„ã‚‹ã‹ã€‚</span>
                </div>
                <div class="check-options">
                    <div class="check-option" onclick="selectOption(this, 'ok', 11)">
                        <span>âœ“</span>
                        <span>é©åˆ</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'warning', 11)">
                        <span>âš </span>
                        <span>è¦æ˜¯æ­£</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'ng', 11)">
                        <span>âœ—</span>
                        <span>ä¸é©</span>
                    </div>
                </div>
                <button class="note-btn" onclick="addNote(11)">
                    <span>!</span>
                    <span>æŒ‡æ‘˜äº‹é …ã‚’è¿½åŠ </span>
                </button>
            </div>

            <div class="check-item" data-item-id="12">
                <div class="check-item-header">
                    <span class="check-item-text">12. SAä»˜ãƒ©ãƒ³ãƒ¤ãƒ¼ãƒ‰ã€ãƒ¯ãƒ¼ã‚¯ãƒã‚¸ã‚·ãƒ§ãƒ‹ãƒ³ã‚°ãƒ­ãƒ¼ãƒ—ã®ä½µç”¨ã¯ç¢ºå®Ÿã«è¡Œã‚ã‚Œã¦ã„ã‚‹ã‹ã€‚ï¼ˆãƒ•ãƒƒã‚¯å–ä»˜ã‘æ™‚ã®2åº¦å¼•ãç¢ºèªï¼‰</span>
                </div>
                <div class="check-options">
                    <div class="check-option" onclick="selectOption(this, 'ok', 12)">
                        <span>âœ“</span>
                        <span>é©åˆ</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'warning', 12)">
                        <span>âš </span>
                        <span>è¦æ˜¯æ­£</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'ng', 12)">
                        <span>âœ—</span>
                        <span>ä¸é©</span>
                    </div>
                </div>
                <button class="note-btn" onclick="addNote(12)">
                    <span>!</span>
                    <span>æŒ‡æ‘˜äº‹é …ã‚’è¿½åŠ </span>
                </button>
            </div>

            <!-- ä»¥é™çœç•¥ï¼š13-20ã®æŸ±ä¸Šä½œæ¥­äº‹é … -->

            <!-- é«˜æ‰€ä½œæ¥­è»Šãƒ»è»Šä¸¡ç³»å»ºè¨­æ©Ÿæ¢°ä½œæ¥­äº‹é … -->
            <div class="check-category">é«˜æ‰€ä½œæ¥­è»Šãƒ»è»Šä¸¡ç³»å»ºè¨­æ©Ÿæ¢°ä½œæ¥­äº‹é …ï¼ˆé›»æ°—ã€åœŸæœ¨å…±é€šï¼‰</div>
            
            <div class="check-item" data-item-id="21">
                <div class="check-item-header">
                    <span class="check-item-text">21. å·¥äº‹è»Šä¸¡ã®æ­¯æ­¢ã‚ã€åŠã³é§è»Šãƒ–ãƒ¬ãƒ¼ã‚­ã¯ç¢ºå®Ÿã«å¼•ã‹ã‚Œã¦ã„ã‚‹ã‹ã€‚</span>
                </div>
                <div class="check-options">
                    <div class="check-option" onclick="selectOption(this, 'ok', 21)">
                        <span>âœ“</span>
                        <span>é©åˆ</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'warning', 21)">
                        <span>âš </span>
                        <span>è¦æ˜¯æ­£</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'ng', 21)">
                        <span>âœ—</span>
                        <span>ä¸é©</span>
                    </div>
                </div>
                <button class="note-btn" onclick="addNote(21)">
                    <span>!</span>
                    <span>æŒ‡æ‘˜äº‹é …ã‚’è¿½åŠ </span>
                </button>
            </div>

            <!-- å¤œé–“ä½œæ¥­äº‹é … -->
            <div class="check-category">å¤œé–“ä½œæ¥­äº‹é …ï¼ˆé›»æ°—ã€åœŸæœ¨å…±é€šï¼‰</div>
            
            <div class="check-item" data-item-id="28">
                <div class="check-item-header">
                    <span class="check-item-text">28. å¤œé–“ä½œæ¥­æ™‚ã€ä¿å®‰æ–½è¨­ç…§æ˜ã‚„ç¾å ´å†…ç…§æ˜ã®ç…§åº¦ã¯ååˆ†ã‹ã€‚</span>
                </div>
                <div class="check-options">
                    <div class="check-option" onclick="selectOption(this, 'ok', 28)">
                        <span>âœ“</span>
                        <span>é©åˆ</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'warning', 28)">
                        <span>âš </span>
                        <span>è¦æ˜¯æ­£</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'ng', 28)">
                        <span>âœ—</span>
                        <span>ä¸é©</span>
                    </div>
                </div>
                <button class="note-btn" onclick="addNote(28)">
                    <span>!</span>
                    <span>æŒ‡æ‘˜äº‹é …ã‚’è¿½åŠ </span>
                </button>
            </div>

            <!-- ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ»æ–½å·¥ä½“åˆ¶äº‹é … -->
            <div class="check-category">ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ»æ–½å·¥ä½“åˆ¶äº‹é …ï¼ˆé›»æ°—ã€åœŸæœ¨å…±é€šï¼‰</div>
            
            <div class="check-item" data-item-id="31">
                <div class="check-item-header">
                    <span class="check-item-text">31. ç¾å ´ä»£ç†äººï¼ˆå®‰å…¨ç®¡ç†è€…ï¼‰ã¯å®‰å…¨ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°å®Ÿæ–½è¡¨ã®ã€Œå®‰å…¨æŒ‡ç¤ºæ›¸ã€ãŒè¨˜å…¥ã•ã‚Œã¦ã„ã‚‹ã‹ã€‚å†…å®¹ã¯é©åˆ‡ã‹ã€‚</span>
                </div>
                <div class="check-options">
                    <div class="check-option" onclick="selectOption(this, 'ok', 31)">
                        <span>âœ“</span>
                        <span>é©åˆ</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'warning', 31)">
                        <span>âš </span>
                        <span>è¦æ˜¯æ­£</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'ng', 31)">
                        <span>âœ—</span>
                        <span>ä¸é©</span>
                    </div>
                </div>
                <button class="note-btn" onclick="addNote(31)">
                    <span>!</span>
                    <span>æŒ‡æ‘˜äº‹é …ã‚’è¿½åŠ </span>
                </button>
            </div>

            <div class="check-item" data-item-id="43">
                <div class="check-item-header">
                    <span class="check-item-text">43. ä½œæ¥­å“¡ã®ãƒ˜ãƒ«ãƒ¡ãƒƒãƒˆã€ä½œæ¥­é´ã€æœè£…åŠã³ä¿è­·å…·ï¼ˆé˜²æŒ¯æ‰‹è¢‹ã€é˜²è­·ãƒ¡ã‚¬ãƒã€é˜²å¡µãƒã‚¹ã‚¯ï¼‰ã®ç€ç”¨ã¯é©åˆ‡ã‹ã€‚</span>
                </div>
                <div class="check-options">
                    <div class="check-option" onclick="selectOption(this, 'ok', 43)">
                        <span>âœ“</span>
                        <span>é©åˆ</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'warning', 43)">
                        <span>âš </span>
                        <span>è¦æ˜¯æ­£</span>
                    </div>
                    <div class="check-option" onclick="selectOption(this, 'ng', 43)">
                        <span>âœ—</span>
                        <span>ä¸é©</span>
                    </div>
                </div>
                <button class="note-btn" onclick="addNote(43)">
                    <span>!</span>
                    <span>æŒ‡æ‘˜äº‹é …ã‚’è¿½åŠ </span>
                </button>
            </div>
        </div>

        <button class="btn btn-primary btn-block" onclick="completeCheck()" style="margin-top: 16px;">
            <span>ãƒã‚§ãƒƒã‚¯å®Œäº†</span>
        </button>
    </div>

    <!-- D: ç·æ‹¬å…¥åŠ›ç”»é¢ -->
    <div class="screen" id="screenD">
        <div class="card">
            <div class="card-title">
                <span>âš ï¸</span>
                <span>æŒ‡æ‘˜äº‹é …ä¸€è¦§</span>
            </div>
            
            <div style="overflow-x: auto;">
                <table class="issue-table">
                    <thead>
                        <tr>
                            <th style="width: 40px;">No</th>
                            <th style="width: 60px;">åŒºåˆ†</th>
                            <th style="width: 80px;">å¯¾è±¡è€…</th>
                            <th style="width: 60px;">åˆ†é¡</th>
                            <th>æŒ‡æ‘˜å†…å®¹</th>
                            <th style="width: 40px;">å‰Šé™¤</th>
                        </tr>
                    </thead>
                    <tbody id="issueTableBody">
                        <tr>
                            <td>1</td>
                            <td>
                                <select>
                                    <option>è¦æ˜¯æ­£</option>
                                    <option>æ³¨æ„</option>
                                    <option>æ”¹å–„</option>
                                </select>
                            </td>
                            <td><input type="text" placeholder="æ°å"></td>
                            <td><input type="text" placeholder="åˆ†é¡"></td>
                            <td><input type="text" placeholder="æŒ‡æ‘˜å†…å®¹"></td>
                            <td><button class="delete-btn" onclick="deleteIssue(this)">ğŸ—‘</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <button class="btn btn-secondary" onclick="addIssue()" style="margin-top: 12px;">
                <span>ï¼‹ æŒ‡æ‘˜ã‚’è¿½åŠ </span>
            </button>
        </div>

        <div class="card">
            <div class="card-title">
                <span>ğŸ’¬</span>
                <span>ç·åˆã‚³ãƒ¡ãƒ³ãƒˆ</span>
            </div>
            
            <div class="form-group">
                <label>æ‰€æ„Ÿãƒ»åŠ©è¨€ãƒ»å¯¾ç­–ãªã©</label>
                <textarea id="generalComment" placeholder="æœ¬æ—¥ã®å·¡è¦–çµæœã«ã¤ã„ã¦è¨˜å…¥ã—ã¦ãã ã•ã„"></textarea>
            </div>
        </div>

        <button class="btn btn-success btn-block" onclick="saveAndFinish()">
            <span>ğŸ’¾</span>
            <span>ä¿å­˜ã—ã¦çµ‚äº†</span>
        </button>
    </div>

    <!-- ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div class="modal" id="completeModal">
        <div class="modal-content">
            <div class="modal-title">âœ… ä¿å­˜å®Œäº†</div>
            <p style="text-align: center; margin: 16px 0;">
                å·¡è¦–ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚<br>
                ãŠç–²ã‚Œã•ã¾ã§ã—ãŸã€‚
            </p>
            <div class="modal-buttons">
                <button class="btn btn-primary btn-block" onclick="resetApp()">
                    æ–°è¦å·¡è¦–ã‚’é–‹å§‹
                </button>
            </div>
        </div>
    </div>

    <div class="modal" id="infoModal">
        <div class="modal-content">
            <div class="modal-title">â„¹ï¸ è©³ç´°æƒ…å ±</div>
            <p id="infoContent" style="margin: 16px 0; font-size: 14px; line-height: 1.6;"></p>
            <div class="modal-buttons">
                <button class="btn btn-secondary btn-block" onclick="closeModal('infoModal')">
                    é–‰ã˜ã‚‹
                </button>
            </div>
        </div>
    </div>

    <div class="modal" id="noteModal">
        <div class="modal-content">
            <div class="modal-title">ğŸ“ æŒ‡æ‘˜äº‹é …å…¥åŠ›</div>
            <textarea style="width: 100%; min-height: 100px; margin: 16px 0;" placeholder="æ°—ã¥ã„ãŸç‚¹ã‚„æŒ‡æ‘˜äº‹é …ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"></textarea>
            <div class="modal-buttons">
                <button class="btn btn-secondary" style="flex: 1;" onclick="closeModal('noteModal')">
                    ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                </button>
                <button class="btn btn-primary" style="flex: 1;" onclick="saveNote()">
                    ä¿å­˜
                </button>
            </div>
        </div>
    </div>

    <script>
        // ãƒ‡ãƒ¼ã‚¿ç®¡ç†
        let appData = {
            basicInfo: {},
            works: [],  // åˆæœŸã¯ç©ºé…åˆ—
            currentWork: null,
            checkResults: {},  // ä½œæ¥­IDã”ã¨ã«ãƒã‚§ãƒƒã‚¯çµæœã‚’ä¿å­˜
            issues: []
        };

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // ä»Šæ—¥ã®æ—¥ä»˜ã‚’è¨­å®š
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('inspectionDate').value = today;
            
            // ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆé …ç›®ã‚’è¡¨ç¤ºï¼ˆåˆæœŸã¯ç©ºï¼‰
            renderChecklistItems();
        });

        // ç”»é¢é·ç§»
        function switchScreen(screenId, subtitle) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
            document.getElementById('headerSubtitle').textContent = subtitle;
            window.scrollTo(0, 0);
        }

        // A â†’ B
        function goToScreenB() {
            // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            const required = ['inspectionDate', 'siteName', 'workLocation', 'constructionType', 'workCategory', 'supervisor'];
            let valid = true;
            
            required.forEach(id => {
                const el = document.getElementById(id);
                if (!el.value) {
                    el.style.borderColor = '#e74c3c';
                    valid = false;
                } else {
                    el.style.borderColor = '#ddd';
                }
            });
            
            if (!valid) {
                alert('å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            // ãƒ‡ãƒ¼ã‚¿ä¿å­˜
            appData.basicInfo = {
                date: document.getElementById('inspectionDate').value,
                site: document.getElementById('siteName').value,
                location: document.getElementById('workLocation').value,
                type: document.getElementById('constructionType').value,
                category: document.getElementById('workCategory').value,
                supervisor: document.getElementById('supervisor').value
            };
            
            switchScreen('screenB', 'ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆé …ç›®é¸æŠ');
        }

        // ãƒ„ãƒªãƒ¼ã®é–‹é–‰
        function toggleTree(categoryId) {
            const header = event.currentTarget;
            const items = document.getElementById('tree-' + categoryId);
            
            header.classList.toggle('expanded');
            items.classList.toggle('expanded');
        }

        // ãƒ„ãƒªãƒ¼ã‹ã‚‰ä½œæ¥­ã‚’è¿½åŠ 
        function addWorkFromTree(workName) {
            // æ—¢ã«è¿½åŠ ã•ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
            if (appData.works.some(w => w.name === workName)) {
                alert('ã“ã®ä½œæ¥­ã¯æ—¢ã«è¿½åŠ ã•ã‚Œã¦ã„ã¾ã™');
                return;
            }
            
            const newWork = {
                id: Date.now(),
                name: workName,
                selected: false,
                status: 'pending'
            };
            
            appData.works.push(newWork);
            
            // è¿½åŠ ãƒœã‚¿ãƒ³ã‚’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            const btn = event.target;
            btn.textContent = 'âœ“';
            btn.style.background = '#27ae60';
            
            setTimeout(() => {
                btn.textContent = 'è¿½åŠ ';
                btn.style.background = '#4a90e2';
            }, 1000);
            
            renderChecklistItems();
        }

        // ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆé …ç›®ã®è¡¨ç¤º
        function renderChecklistItems() {
            const container = document.getElementById('checklistItems');
            
            if (appData.works.length === 0) {
                // ç©ºã®çŠ¶æ…‹ã‚’è¡¨ç¤º
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">ğŸ“‹</div>
                        <div class="empty-state-text">
                            ä½œæ¥­ãŒé¸æŠã•ã‚Œã¦ã„ã¾ã›ã‚“<br>
                            ä¸Šè¨˜ã‹ã‚‰ä½œæ¥­ã‚’é¸æŠã—ã¦ãã ã•ã„
                        </div>
                    </div>
                `;
            } else {
                container.innerHTML = '';
                
                appData.works.forEach(work => {
                    const item = document.createElement('div');
                    item.className = 'checklist-item';
                    item.onclick = () => toggleWork(work.id);
                    
                    let statusClass = 'status-pending';
                    let statusIcon = 'â–¡';
                    if (work.status === 'progress') {
                        statusClass = 'status-progress';
                        statusIcon = 'â– ';
                    } else if (work.status === 'complete') {
                        statusClass = 'status-complete';
                        statusIcon = 'âœ“';
                    }
                    
                    item.innerHTML = `
                        <div class="checklist-checkbox ${work.selected ? 'checked' : ''}" id="check-${work.id}"></div>
                        <div class="checklist-name">${work.name}</div>
                        <div class="checklist-status ${statusClass}">${statusIcon}</div>
                    `;
                    
                    container.appendChild(item);
                });
            }
            
            updateProgress();
        }

        // ä½œæ¥­ã®é¸æŠ/é–‹å§‹
        function toggleWork(workId) {
            const work = appData.works.find(w => w.id === workId);
            
            if (!work.selected) {
                // é¸æŠã—ã¦ç”»é¢Cã¸
                work.selected = true;
                work.status = 'progress';
                appData.currentWork = work;
                
                // ã“ã®ä½œæ¥­ã®ãƒã‚§ãƒƒã‚¯çµæœã‚’åˆæœŸåŒ–ï¼ˆã¾ã ãªã„å ´åˆï¼‰
                if (!appData.checkResults[workId]) {
                    appData.checkResults[workId] = { items: {}, photoCount: 0 };
                }
                
                document.getElementById('currentWorkName').textContent = work.name;
                loadCheckState(workId);  // ã“ã®ä½œæ¥­ã®çŠ¶æ…‹ã‚’èª­ã¿è¾¼ã¿
                switchScreen('screenC', `ãƒã‚§ãƒƒã‚¯å…¥åŠ› - ${work.name}`);
            } else if (work.status === 'progress' || work.status === 'complete') {
                // æ—¢ã«é€²è¡Œä¸­ã¾ãŸã¯å®Œäº†æ¸ˆã¿ãªã‚‰ç”»é¢Cã¸
                appData.currentWork = work;
                
                document.getElementById('currentWorkName').textContent = work.name;
                loadCheckState(workId);  // ã“ã®ä½œæ¥­ã®çŠ¶æ…‹ã‚’èª­ã¿è¾¼ã¿
                switchScreen('screenC', `ãƒã‚§ãƒƒã‚¯å…¥åŠ› - ${work.name}`);
            }
        }

        // ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹ã®èª­ã¿è¾¼ã¿
        function loadCheckState(workId) {
            // å„ãƒã‚§ãƒƒã‚¯é …ç›®ã®çŠ¶æ…‹ã‚’å¾©å…ƒ
            const checkItems = document.querySelectorAll('.check-item');
            
            checkItems.forEach(item => {
                const itemId = item.dataset.itemId;
                const options = item.querySelectorAll('.check-option');
                
                // ã™ã¹ã¦ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã‚¯ãƒªã‚¢
                options.forEach(option => {
                    option.classList.remove('selected-ok', 'selected-warning', 'selected-ng');
                });
                
                // ä¿å­˜ã•ã‚Œã¦ã„ã‚‹çŠ¶æ…‹ãŒã‚ã‚Œã°é©ç”¨
                const savedState = appData.checkResults[workId];
                if (savedState && savedState.items && savedState.items[itemId]) {
                    const savedType = savedState.items[itemId];
                    options.forEach(option => {
                        if (option.onclick.toString().includes(`'${savedType}'`)) {
                            if (savedType === 'ok') {
                                option.classList.add('selected-ok');
                            } else if (savedType === 'warning') {
                                option.classList.add('selected-warning');
                            } else if (savedType === 'ng') {
                                option.classList.add('selected-ng');
                            }
                        }
                    });
                }
            });
            
            // å†™çœŸæšæ•°ã‚‚å¾©å…ƒ
            const savedState = appData.checkResults[workId];
            if (savedState && savedState.photoCount) {
                document.getElementById('photoCount').textContent = savedState.photoCount;
            } else {
                document.getElementById('photoCount').textContent = '0';
            }
        }

        // æ–°è¦ä½œæ¥­è¿½åŠ ï¼ˆãã®ä»–ã®ä½œæ¥­ï¼‰
        function addNewWork() {
            const name = prompt('ãã®ä»–ã®ä½œæ¥­åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„\nï¼ˆä¾‹ï¼šä»®è¨­é›»æºè¨­ç½®ã€è³‡ææ¬å…¥ã€ç¾å ´æ¸…æƒãªã©ï¼‰');
            if (name) {
                // æ—¢ã«è¿½åŠ ã•ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
                if (appData.works.some(w => w.name === name)) {
                    alert('ã“ã®ä½œæ¥­ã¯æ—¢ã«è¿½åŠ ã•ã‚Œã¦ã„ã¾ã™');
                    return;
                }
                
                const newWork = {
                    id: Date.now(),
                    name: name,
                    selected: false,
                    status: 'pending'
                };
                appData.works.push(newWork);
                renderChecklistItems();
            }
        }

        // ãƒã‚§ãƒƒã‚¯å®Œäº†
        function completeCheck() {
            if (appData.currentWork) {
                // ç¾åœ¨ã®ä½œæ¥­ã®ãƒã‚§ãƒƒã‚¯çµæœã‚’ç¢ºèª
                const workId = appData.currentWork.id;
                
                // ãƒã‚§ãƒƒã‚¯é …ç›®ã®å®Œäº†çŠ¶æ³ã‚’ç¢ºèª
                const checkItems = document.querySelectorAll('.check-item');
                let hasChecked = false;
                
                checkItems.forEach(item => {
                    const hasSelection = item.querySelector('.check-option.selected-ok, .check-option.selected-warning, .check-option.selected-ng');
                    if (hasSelection) {
                        hasChecked = true;
                    }
                });
                
                if (!hasChecked) {
                    alert('æœ€ä½1ã¤ä»¥ä¸Šã®ãƒã‚§ãƒƒã‚¯é …ç›®ã‚’é¸æŠã—ã¦ãã ã•ã„');
                    return;
                }
                
                appData.currentWork.status = 'complete';
                
                // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                const btn = event.target;
                btn.classList.add('pulse');
                
                setTimeout(() => {
                    // ç”»é¢Bã«æˆ»ã‚‹
                    switchScreen('screenB', 'ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆé …ç›®é¸æŠ');
                    renderChecklistItems();
                    
                    // å…¨å®Œäº†ãƒã‚§ãƒƒã‚¯
                    const allComplete = appData.works.every(w => w.status === 'complete');
                    if (allComplete && appData.works.length > 0) {
                        setTimeout(() => {
                            goToScreenD();
                        }, 500);
                    }
                }, 300);
            }
        }

        // é€²æ—æ›´æ–°
        function updateProgress() {
            const total = appData.works.length;
            const completed = appData.works.filter(w => w.status === 'complete').length;
            const percentage = total > 0 ? (completed / total * 100) : 0;
            
            document.getElementById('progressBar').style.width = percentage + '%';
            document.getElementById('progressText').textContent = `${completed}/${total}`;
            
            // å®Œäº†ãƒœã‚¿ãƒ³ã®æœ‰åŠ¹åŒ–
            const finishBtn = document.getElementById('finishBtn');
            if (percentage === 100 && total > 0) {
                finishBtn.disabled = false;
            } else {
                finishBtn.disabled = true;
            }
        }

        // B â†’ D
        function goToScreenD() {
            switchScreen('screenD', 'ç·æ‹¬å…¥åŠ›');
        }

        // ä½œæ¥­è€…ã®è¿½åŠ /å‰Šé™¤
        function addWorker() {
            const list = document.getElementById('workerList');
            const item = document.createElement('div');
            item.className = 'worker-item';
            item.innerHTML = `
                <input type="text" placeholder="ä½œæ¥­è€…å">
                <button class="worker-remove" onclick="removeWorker(this)">Ã—</button>
            `;
            list.appendChild(item);
        }

        function removeWorker(btn) {
            btn.parentElement.remove();
        }

        // æŒ‡æ‘˜äº‹é …ã®è¿½åŠ /å‰Šé™¤
        let issueCount = 1;
        function addIssue() {
            issueCount++;
            const tbody = document.getElementById('issueTableBody');
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${issueCount}</td>
                <td>
                    <select>
                        <option>è¦æ˜¯æ­£</option>
                        <option>æ³¨æ„</option>
                        <option>æ”¹å–„</option>
                    </select>
                </td>
                <td><input type="text" placeholder="æ°å"></td>
                <td><input type="text" placeholder="åˆ†é¡"></td>
                <td><input type="text" placeholder="æŒ‡æ‘˜å†…å®¹"></td>
                <td><button class="delete-btn" onclick="deleteIssue(this)">ğŸ—‘</button></td>
            `;
            tbody.appendChild(row);
        }

        function deleteIssue(btn) {
            btn.closest('tr').remove();
        }

        // ãƒã‚§ãƒƒã‚¯é …ç›®ã®é¸æŠ
        function selectOption(element, type, itemId) {
            // åŒã˜ã‚°ãƒ«ãƒ¼ãƒ—å†…ã®é¸æŠã‚’ã‚¯ãƒªã‚¢
            const options = element.parentElement.querySelectorAll('.check-option');
            options.forEach(opt => {
                opt.classList.remove('selected-ok', 'selected-warning', 'selected-ng');
            });
            
            // é¸æŠçŠ¶æ…‹ã‚’è¨­å®š
            if (type === 'ok') {
                element.classList.add('selected-ok');
            } else if (type === 'warning') {
                element.classList.add('selected-warning');
            } else if (type === 'ng') {
                element.classList.add('selected-ng');
            }
            
            // ç¾åœ¨ã®ä½œæ¥­ã®ãƒã‚§ãƒƒã‚¯çµæœã‚’ä¿å­˜
            if (appData.currentWork) {
                const workId = appData.currentWork.id;
                if (!appData.checkResults[workId]) {
                    appData.checkResults[workId] = { items: {} };
                }
                appData.checkResults[workId].items[itemId] = type;
            }
            
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            element.classList.add('pulse');
            setTimeout(() => element.classList.remove('pulse'), 500);
        }

        // å†™çœŸæ©Ÿèƒ½ï¼ˆãƒ€ãƒŸãƒ¼ï¼‰
        function takePhoto() {
            if (appData.currentWork) {
                const workId = appData.currentWork.id;
                if (!appData.checkResults[workId]) {
                    appData.checkResults[workId] = { items: {}, photoCount: 0 };
                }
                appData.checkResults[workId].photoCount = (appData.checkResults[workId].photoCount || 0) + 1;
                document.getElementById('photoCount').textContent = appData.checkResults[workId].photoCount;
                alert('ğŸ“· å†™çœŸã‚’æ’®å½±ã—ã¾ã—ãŸï¼ˆãƒ‡ãƒ¢ï¼‰');
            }
        }

        function viewPhotos() {
            if (appData.currentWork) {
                const workId = appData.currentWork.id;
                const photoCount = appData.checkResults[workId]?.photoCount || 0;
                alert(`ğŸ“¸ ${photoCount}æšã®å†™çœŸãŒã‚ã‚Šã¾ã™ï¼ˆãƒ‡ãƒ¢ï¼‰`);
            }
        }

        // ãƒ¢ãƒ¼ãƒ€ãƒ«
        function showInfo(text) {
            document.getElementById('infoContent').textContent = text;
            document.getElementById('infoModal').classList.add('active');
        }

        function addNote(itemId) {
            document.getElementById('noteModal').classList.add('active');
            // itemIdã‚’ä¿å­˜ã—ã¦å¾Œã§ä½¿ç”¨å¯èƒ½
            document.getElementById('noteModal').dataset.itemId = itemId;
        }

        function saveNote() {
            closeModal('noteModal');
            alert('æŒ‡æ‘˜äº‹é …ã‚’ä¿å­˜ã—ã¾ã—ãŸï¼ˆãƒ‡ãƒ¢ï¼‰');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // ä¿å­˜ã—ã¦çµ‚äº†
        function saveAndFinish() {
            document.getElementById('completeModal').classList.add('active');
        }

        // ã‚¢ãƒ—ãƒªãƒªã‚»ãƒƒãƒˆ
        function resetApp() {
            location.reload();
        }
    </script>
</body>
</html>
